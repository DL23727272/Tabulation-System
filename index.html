<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login</title>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"/>

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"/>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Alertify sakit sa ulo -->
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/alertify.min.css"/>
    <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/css/themes/bootstrap.min.css"/>
    <!-- Sweet -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>

    <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
    <link rel="icon" type="image/x-icon" href="/img/logo.ico">

    <style>
        body{
            background-color: #000000;
        }
          .navbar {
            background-color: #8284ea; 
            transition: background-color 0.3s ease; 
          }
          .navbar.blurred {
            background-color: transparent; /* aalisin niya yung background color */
            backdrop-filter: blur(20px); /* then eto papalit, blur effect */
          }
          .nav-link {
            color: white;
            font-weight: 500;
            transition: color 0.3s ease 
          }
          .nav-link.scrolled {
            color: #ffffff;
            font-weight: 500;
          }
          .nav-link.scrolled:hover {
            color: #006341; 
            font-weight: 500;
          }
          input{
            border-radius: 10px;
            background: #c8c1c1;
            box-shadow: inset 5px 5px 6px #8a8585,
                        inset -5px -5px 6px #fffdfd;
          }
          .login_card{
            height: 90%;
            border-radius: 6px;
            background-color: rgba(255, 255, 255, 0.385); 
            backdrop-filter: blur(10px); 
            box-shadow: rgba(0, 0, 0, 0.3) 0px 19px 38px, rgba(0, 0, 0, 0.22) 0px 15px 12px;
          }
          .login__bg{
            position: absolute;
            width: 100%;
            height: 105%;
            object-fit: cover;
            object-position: center;
            z-index: -1;
          }
           /* Scrollbar*/
          ::-webkit-scrollbar {
            width: 20px;
          }
          ::-webkit-scrollbar-track {
            box-shadow: inset 0 0 5px grey; 
            border-radius: 10px;
          }
          ::-webkit-scrollbar-thumb {
            background: #8284ea; 
            border-radius: 10px;
          }
          ::-webkit-scrollbar-thumb:hover {
            background: #b30000; 
          }
          /* END OF Scrollbar */
    </style>
</head>
<body>
     <!--Navbar-->
     <nav class="navbar navbar-expand-lg shadow-lg sticky-top" id="navbar">
        <div class="container-sm d-flex justify-content-between" style="width: 100%">
  
          <div class="d-flex justify-content-between align-items-center" style="width: 100vw">
            <div>
              <!-- for logo -->
              <a href="#" style="cursor: pointer;"> <img src="img/logo.png" alt="LOGO" style="width: 60px; "></a>
            </div>
            <div>
              <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent">
                <i class="fa-solid fa-bars" id="mugIcon"></i>
              </button>
            </div>
          </div>
      
          <!-- <div class="collapse navbar-collapse container-fluid" id="navbarSupportedContent" style="width: 30vw">
            <ul class="navbar-nav mb-2 mb-lg-0">
              <li class="nav-item">
                <a class="nav-link " aria-current="page" href="#">
                  Home
                </a>
              </li>
              <li class="nav-item">
                <a class="nav-link  " href="index.html#products">
                  Products
                </a>
              </li>
            </ul>
          </div> -->
  
        </div>
      </nav>
      <!--End ti Navbar -->

      <img src="img/bg.png" alt="image" class="login__bg" >

      

      <!-- LOGIN FORM -->
      <section class="vh-100">
       
        <div class="container-sm mt-5 ">
          <div class="row">
  
            <div class="col">
            </div>
  
            <div class="col">
            </div>
  
            <div class="col ">
                <div class="login_card card mt-4">
                  <form enctype="multipart/form-data" method="POST" class="mt-1">
                    <div class="m-5">
                        <div class="form-group my-4">
                          <img src="img/logo.png" alt="LOGO" style="width: 90px; ">
                        </div>
                        <div class="form-group my-4">
                            <label for="Name" style="font-weight: 700;"><i class="fa-solid fa-signature"></i> Username</label>
                            <input type="text" name="customerName" id="customerName" placeholder="Enter Username" class=" form-control" required>
                        </div>
                        <div class="form-group my-4">
                          <label for="pass" style="font-weight: 700;"><i class="fa-solid fa-lock"></i> Password</label>
                          <input type="password" name="customerPassword" id="customerPassword" placeholder="Enter Password" class="  form-control" required>
                        </div>
                         <div class="col-sm">
                            <p style="font-size: 13px; color: rgb(0, 0, 0);">
                                Don't have an account? 
                                <a  data-bs-toggle="modal" data-bs-target="#exampleModal" 
                                    style="text-overflow: unset; color: rgb(252, 254, 255); text-decoration: none; " 
                                    onmouseover="this.style.textDecoration='underline'" 
                                    onmouseout="this.style.textDecoration='none'">
                                  Sign up
                                </a>
                            </p>
                        </div>
                       
                        <div class="form-group row justify-content-end"> 
                            <div class="col-auto">
                                <button type="button" id="addProductButton" class="btn btn-outline-light" onclick="Login()">Login</button>
                            </div>
                        </div>
                    </div>
                  </form>
                </div>
            </div>

          </div>
        </div>
       
      </section>

      <!-- MODAL -->

      <div id="modalContainer"></div>

      <!-- END MODAL -->

      <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />

      <!--Hero-->
      <section class="container-sm">
        <div class="d-flex flex-column align-items-center text-center">
          <img
            src="./img/ispsc.png"
            style="width: 200px; height: 200px;"
            alt="logo"
            class="mt-5 mb-3 img-fluid"
            srcset=""
          />
          <p class="w-75 lead text-secondary fst-italic">
           Lorem ipsum dolor sit amet consectetur adipisicing elit. Tempora sit fugit
            quia odit a suscipit aut iste nisi earum porro quas asperiores labore nostrum,
            repellendus nobis. Impedit unde repellendus perferendis? Quisquam vitae iure
             blanditiis cum saepe suscipit. Repellat, aspernatur. Amet.
          </p>
          <!-- <a class="nav-link" data-bs-toggle="modal" data-bs-target="#addProduct"> 
          <button class="btn btn-outline-success" >Add Product</button>
          </a> -->
        </div>
      </section>
      <!-- End Hero-->

      <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />
      
      <!-- Contestants CONTENT -->
        
      <section class="container-sm">
          <div class="d-flex flex-column align-items-center text-center">
            <h1 class="fst-italic text-center text-white">Our Contestants </h1>
              <section class="container-sm">
                  <h1 class="fst-italic text-center text-white">Male </h1>
                  <div id="maleContestants" class="container mt-5 text-center">
                  </div>
              </section>
          

              <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />

              <section class="container-sm">
                  <h1 class="fst-italic text-center text-white">Female </h1>
                  <div id="femaleContestants" class="container mt-5 text-center">
                  </div>
              </section>
          </div>
      </section>
    <!-- END OF Contestants CONTENT -->

    <hr class="container-sm Sborder border-success mt-5 border-2 opacity-50" />
      
    
      <!---Footer-->
      <footer class="mt-5 text-white p-3" style="background-color: #000000;">
        <div class="container-sm d-flex justify-content-between align-items-center">
          <div class="">
            <h4>Tabulation System</h4>
            <h5>DL VISUALS</h5>
            <ul>
              <li>Dran Leynard Gamoso</li>
              <li><a href="https://www.facebook.com/DLuvvsssU" style="text-decoration: none; color:white"><i class="fa-brands fa-facebook"></i> Facebook</a></li>
            </ul>
          </div>
          <div class="">
            <div>
              <img src="./img/logo.png" style=" width: 50px; height: 50px;" alt="">
            </div>
            <div>
              <p class="fst-bold">&copy DL Visuals</p>
            </div>
          </div>
        </div>
      </footer>
     <!---End Footer-->

     <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js'></script>
     <script src="//cdn.jsdelivr.net/npm/alertifyjs@1.13.1/build/alertify.min.js"></script>
     <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
     <script type="text/javascript">
      alertify.set('notifier', 'position', 'top-right');

      $(document).ready(function () {
        $('#modalContainer').load('modal.html');
      });
    
      //For navbar
      window.onscroll = function () { scrollFunction() };

      function scrollFunction() {
        if (document.body.scrollTop > 50 || document.documentElement.scrollTop > 50) {
          document.getElementById("navbar").classList.add("blurred");
          const navLinks = document.querySelectorAll(".nav-link");
          navLinks.forEach(link => link.classList.add("scrolled"));
          document.getElementById("mugIcon").classList.add("scrolled"); 
        } else {
          document.getElementById("navbar").classList.remove("blurred");
          const navLinks = document.querySelectorAll(".nav-link");
          navLinks.forEach(link => link.classList.remove("scrolled"));
          document.getElementById("mugIcon").classList.remove("scrolled"); 
        }
      }
      //end of function for navbarrr
     
      //form validation
      function Login() {
          var username = document.getElementById("customerName").value;
          var password = document.getElementById("customerPassword").value;
      
          if (username == "" && password == "") {
              alertify.error('Empty fields! Please fill all the fields.');
          } else if (username == "") {
              alertify.error('Fill up the Username field!');
          } else if (password == "") {
              alertify.error('Fill up the Password field!');
          } else {
              // Send form data to loginProcess.php using AJAX
              $.ajax({
                  type: "POST",
                  url: "./backend/loginProcess.php",
                  data: {
                      customerLoginName: username,
                      customerLoginPassword: password
                  },
                  dataType: "json",
                  success: function(response) {
                      // Handle success response
                      if (response.status === 'success') {

                          // if login goods 
                          //alertify.success(response.message + ' <i class="fa fa-spinner fa-spin"></i>');
                          Swal.fire({
                            icon: 'success',
                            title: response.message,
                            showConfirmButton: false,
                            timer: 2000 
                          });
                          

                          var judgeID = response.id;
                          sessionStorage.setItem('judgeID', judgeID);
      
                          var customerNameInput = document.getElementById("customerName").value;
                          var customerName = customerNameInput;
                          sessionStorage.setItem('customerName', customerName); //tangina  40mins para dito
      
                          setTimeout(function() {

                              if (response.type === 'admin') {
                                  window.location.href = 'admin.html'; 
                              } else {
                                  window.location.href = 'home.html'; 
                              }

                          }, 2000);
      
                      } else {
                        //  alertify.error(response.message);// Display error message 
                          Swal.fire({
                            icon: 'error',
                            title: response.message,
                            showConfirmButton: false,
                            timer: 1500 
                          });
                          
                      }
                  },
                  error: function(xhr, status, error) {
                      console.error(xhr.responseText);
                      alertify.error('Failed to log in!');
                  }
              });
          }
      }
    

    function Signup() {
        // Get form data
        var userSignUpName = $("#userSignUpName").val();
        var userSignUpPassword = $("#userSignUpPassword").val();
        var checkSignUpPassword = $("#checkSignUpPassword").val();
    
        if (userSignUpPassword !== checkSignUpPassword) {
            alertify.error('Passwords do not match!');
            return; 
        }
    
        if (userSignUpName === "" || userSignUpPassword === "" || checkSignUpPassword === "") {
            alertify.error('Empty fields! Please fill all the fields.');
        } else {
            $.ajax({
                type: "POST",
                url: "./backend/signupProcess.php",
                data: {
                    userSignUpName: userSignUpName,
                    userSignUpPassword: userSignUpPassword
                },
                dataType: "json",
                success: function(response) {
                  console.log("Signup Response: ", response);
                    if (response.status === 'success') {
                        //alertify.success(response.message);
                        Swal.fire({
                            icon: 'success',
                            title: response.message,
                            showConfirmButton: false,
                            timer: 2000 
                        });
                        $('#exampleModal').modal('hide');
                    } else {
                        alertify.error(response.message);
                    }
                },
                error: function(xhr, status, error) {
                    console.error(xhr.responseText);
                    alertify.error('Failed to sign up!');
                }
            });
        }
    }


    
    $(document).ready(function() {
        function fetchContestants() {
            $.ajax({
                url: './backend/fetchAllContestant.php', 
                type: 'GET',
                dataType: 'json',
                success: function(contestants) {
                    let maleContestants = '';
                    let femaleContestants = '';
                    let maleCount = 0;
                    let femaleCount = 0;

                    contestants.forEach(contestant => {
                        let contestantHtml = `
                            <div class="col mt-5">
                                <div class="card h-100">
                                    <div class="container mt-5 text-center">
                                        <img src="uploads/${contestant.image}" class="card-img-top" alt="Contestant Image" style="width: 200px; height: 250px;">
                                    </div>
                                    <div class="card-body">
                                        <h5 class="card-title">${contestant.name}</h5>
                                        <p class="card-text">Age: ${contestant.age}</p>
                                        <p class="card-text">${contestant.address}</p>
                                        <p class="card-text">Gender: ${contestant.gender}</p>
                                    </div>
                                </div>
                            </div>
                        `;

                        if (contestant.gender.toLowerCase() === 'male') {
                            if (maleCount % 3 === 0) {
                                maleContestants += '<div class="row row-cols-1 row-cols-md-3 g-4">';
                            }
                            maleContestants += contestantHtml;
                            if (maleCount % 3 === 2) {
                                maleContestants += '</div>';
                            }
                            maleCount++;
                        } else {
                            if (femaleCount % 3 === 0) {
                                femaleContestants += '<div class="row row-cols-1 row-cols-md-3 g-4">';
                            }
                            femaleContestants += contestantHtml;
                            if (femaleCount % 3 === 2) {
                                femaleContestants += '</div>';
                            }
                            femaleCount++;
                        }
                    });

                    if (maleCount % 3 !== 0) {
                        maleContestants += '</div>';
                    }
                    if (femaleCount % 3 !== 0) {
                        femaleContestants += '</div>';
                    }

                    $('#maleContestants').html(maleContestants);
                    $('#femaleContestants').html(femaleContestants);
                },
                error: function(xhr, status, error) {
                    console.error('Ajax Error: ' + status + ' - ' + error); 
                }
            });
        }

        fetchContestants();
    });
    

    </script>
</body>
</html>